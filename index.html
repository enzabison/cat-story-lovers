<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cat Story Lovers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #fce7f3 0%, #f3e8ff 50%, #dbeafe 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ec4899, #a855f7);
            padding: 20px;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .header-flex {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
        }
        
        .btn-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-add {
            width: 55px;
            height: 55px;
            background: white;
            color: #ec4899;
            font-size: 32px;
            font-weight: bold;
        }
        
        .content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .card-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }
        
        .card-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #fbb6ce, #c084fc);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
        }
        
        .card-body {
            padding: 20px;
        }
        
        .card-title {
            font-size: 24px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 5px;
        }
        
        .card-text {
            color: #6b7280;
            margin-bottom: 5px;
        }
        
        .empty {
            text-align: center;
            padding: 80px 20px;
        }
        
        .empty-icon {
            font-size: 100px;
            margin-bottom: 20px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .input {
            width: 100%;
            padding: 15px;
            border: 2px solid #d1d5db;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
            background: white;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ec4899, #a855f7);
            color: white;
        }
        
        .btn-secondary {
            background: #9ca3af;
            color: white;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-info {
            background: #3b82f6;
            color: white;
        }
        
        .flex {
            display: flex;
            gap: 10px;
        }
        
        .flex-1 {
            flex: 1;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 32px;
            cursor: pointer;
            padding: 0 10px;
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .photo-box {
            position: relative;
            aspect-ratio: 1;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .photo-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .file-upload {
            display: block;
            padding: 40px;
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            margin: 15px 0;
            background: white;
        }
        
        .upload-icon {
            font-size: 60px;
            margin-bottom: 10px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .item-card {
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .del-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #ef4444;
            font-size: 20px;
            cursor: pointer;
        }
        
        .lang-btns {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .lang-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-weight: bold;
        }
        
        .lang-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .theme-box {
            aspect-ratio: 1;
            border-radius: 10px;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .theme-box.active {
            border-color: #1f2937;
        }
        
        .theme-1 { background: linear-gradient(135deg, #ec4899, #a855f7); }
        .theme-2 { background: linear-gradient(135deg, #3b82f6, #06b6d4); }
        .theme-3 { background: linear-gradient(135deg, #10b981, #14b8a6); }
        .theme-4 { background: linear-gradient(135deg, #f97316, #f59e0b); }
        .theme-5 { background: linear-gradient(135deg, #8b5cf6, #a855f7); }
        
        .mb-1 { margin-bottom: 10px; }
        .mt-1 { margin-top: 10px; }
        .p-1 { padding: 15px; }
        .text-gray { color: #6b7280; }
        .text-sm { font-size: 14px; }
        .bold { font-weight: bold; }
        
        input[type="file"] {
            display: none;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <div class="header-flex">
                <div class="title">Loading...</div>
            </div>
        </div>
        <div class="content">
            <div class="empty">
                <div class="empty-icon">‚è≥</div>
                <h2>Memuat aplikasi...</h2>
            </div>
        </div>
    </div>
    
    <div id="modal" class="modal" onclick="closeModal()">
        <img id="modalImg" src="" alt="">
    </div>

    <script>
        // Global variables
        var app = {
            lang: 'id',
            page: 'home',
            cats: [],
            vaccines: [],
            medicines: [],
            selected: null,
            form: {},
            theme: 1
        };
        
        var text = {
            id: {
                title: 'Cat Story Lovers',
                total: 'Total',
                empty: 'Belum ada kucing',
                clickAdd: 'Klik + untuk menambah',
                add: 'Tambah',
                edit: 'Edit',
                cat: 'Kucing',
                detail: 'Detail',
                name: 'Nama',
                breed: 'Jenis',
                gender: 'Kelamin',
                male: 'Jantan',
                female: 'Betina',
                color: 'Warna',
                birth: 'Tanggal Lahir',
                weight: 'Berat',
                price: 'Harga',
                notes: 'Catatan',
                save: 'Simpan',
                cancel: 'Batal',
                delete: 'Hapus',
                vaccines: 'Vaksin',
                medicines: 'Obat',
                noData: 'Belum ada data',
                settings: 'Pengaturan',
                language: 'Bahasa',
                theme: 'Tema',
                photos: 'Foto',
                uploadPhoto: 'Upload Foto',
                max8: 'Max 8 foto'
            },
            en: {
                title: 'Cat Story Lovers',
                total: 'Total',
                empty: 'No cats yet',
                clickAdd: 'Click + to add',
                add: 'Add',
                edit: 'Edit',
                cat: 'Cat',
                detail: 'Detail',
                name: 'Name',
                breed: 'Breed',
                gender: 'Gender',
                male: 'Male',
                female: 'Female',
                color: 'Color',
                birth: 'Birth Date',
                weight: 'Weight',
                price: 'Price',
                notes: 'Notes',
                save: 'Save',
                cancel: 'Cancel',
                delete: 'Delete',
                vaccines: 'Vaccines',
                medicines: 'Medicines',
                noData: 'No data',
                settings: 'Settings',
                language: 'Language',
                theme: 'Theme',
                photos: 'Photos',
                uploadPhoto: 'Upload Photo',
                max8: 'Max 8 photos'
            }
        };
        
        function t(key) {
            return text[app.lang][key] || key;
        }
        
        function loadData() {
            try {
                var saved = localStorage.getItem('catAppData');
                if (saved) {
                    var data = JSON.parse(saved);
                    app.cats = data.cats || [];
                    app.vaccines = data.vaccines || [];
                    app.medicines = data.medicines || [];
                    app.lang = data.lang || 'id';
                    app.theme = data.theme || 1;
                }
            } catch (e) {
                console.log('Load error:', e);
            }
        }
        
        function saveData() {
            try {
                var data = {
                    cats: app.cats,
                    vaccines: app.vaccines,
                    medicines: app.medicines,
                    lang: app.lang,
                    theme: app.theme
                };
                localStorage.setItem('catAppData', JSON.stringify(data));
            } catch (e) {
                console.log('Save error:', e);
            }
        }
        
        function calcAge(birth) {
            if (!birth) return t('noData');
            var today = new Date();
            var birthDate = new Date(birth);
            var years = Math.floor((today - birthDate) / (365.25 * 24 * 60 * 60 * 1000));
            var months = Math.floor(((today - birthDate) % (365.25 * 24 * 60 * 60 * 1000)) / (30.44 * 24 * 60 * 60 * 1000));
            return years + (app.lang === 'id' ? ' tahun ' : ' years ') + months + (app.lang === 'id' ? ' bulan' : ' months');
        }
        
        function fmtDate(d) {
            if (!d) return t('noData');
            var date = new Date(d);
            var months = ['Jan','Feb','Mar','Apr','Mei','Jun','Jul','Agt','Sep','Okt','Nov','Des'];
            return date.getDate() + ' ' + months[date.getMonth()] + ' ' + date.getFullYear();
        }
        
        function uploadPhotos(e) {
            var files = e.target.files;
            if (!app.form.photos) app.form.photos = [];
            
            for (var i = 0; i < files.length; i++) {
                if (app.form.photos.length >= 8) {
                    alert(t('max8'));
                    break;
                }
                
                (function(file) {
                    var reader = new FileReader();
                    reader.onload = function(evt) {
                        app.form.photos.push(evt.target.result);
                        render();
                    };
                    reader.readAsDataURL(file);
                })(files[i]);
            }
        }
        
        function removePhoto(idx) {
            app.form.photos.splice(idx, 1);
            render();
        }
        
        function openModal(url) {
            document.getElementById('modalImg').src = url;
            document.getElementById('modal').className = 'modal show';
        }
        
        function closeModal() {
            document.getElementById('modal').className = 'modal';
        }
        
        function saveCat() {
            if (!app.form.name || !app.form.breed) {
                alert(app.lang === 'id' ? 'Nama dan jenis wajib diisi!' : 'Name and breed required!');
                return;
            }
            
            if (!app.form.photos) app.form.photos = [];
            
            if (app.form.id) {
                for (var i = 0; i < app.cats.length; i++) {
                    if (app.cats[i].id === app.form.id) {
                        app.cats[i] = app.form;
                        break;
                    }
                }
            } else {
                app.form.id = Date.now();
                app.cats.push(app.form);
            }
            
            saveData();
            app.form = {};
            app.page = 'home';
            render();
        }
        
        function delCat(id) {
            if (confirm(app.lang === 'id' ? 'Hapus kucing ini?' : 'Delete this cat?')) {
                app.cats = app.cats.filter(function(c) { return c.id !== id; });
                app.vaccines = app.vaccines.filter(function(v) { return v.catId !== id; });
                app.medicines = app.medicines.filter(function(m) { return m.catId !== id; });
                saveData();
                app.page = 'home';
                render();
            }
        }
        
        function saveVaccine() {
            if (!app.form.name || !app.form.date) {
                alert(app.lang === 'id' ? 'Nama dan tanggal wajib!' : 'Name and date required!');
                return;
            }
            app.form.id = Date.now();
            app.form.catId = app.selected.id;
            app.vaccines.push(app.form);
            saveData();
            app.form = {};
            app.page = 'detail';
            render();
        }
        
        function delVaccine(id) {
            app.vaccines = app.vaccines.filter(function(v) { return v.id !== id; });
            saveData();
            render();
        }
        
        function saveMedicine() {
            if (!app.form.name || !app.form.type) {
                alert(app.lang === 'id' ? 'Nama dan tipe wajib!' : 'Name and type required!');
                return;
            }
            app.form.id = Date.now();
            app.form.catId = app.selected.id;
            app.medicines.push(app.form);
            saveData();
            app.form = {};
            app.page = 'detail';
            render();
        }
        
        function delMedicine(id) {
            app.medicines = app.medicines.filter(function(m) { return m.id !== id; });
            saveData();
            render();
        }
        
        function changeLang(lng) {
            app.lang = lng;
            saveData();
            render();
        }
        
        function changeTheme(thm) {
            app.theme = thm;
            saveData();
            render();
        }
        
        function render() {
            var html = '';
            var el = document.getElementById('app');
            
            if (app.page === 'home') {
                html = '<div class="header"><div class="header-flex"><div><div class="title">üê± ' + t('title') + '</div><div class="subtitle">' + t('total') + ': ' + app.cats.length + '</div></div><div class="btn-group"><button class="btn-icon" onclick="app.page=\'settings\';render()">‚öôÔ∏è</button><button class="btn-icon btn-add" onclick="app.form={photos:[]};app.page=\'add\';render()">+</button></div></div></div><div class="content">';
                
                if (app.cats.length === 0) {
                    html += '<div class="empty"><div class="empty-icon">üòø</div><h2>' + t('empty') + '</h2><p class="text-gray">' + t('clickAdd') + '</p></div>';
                } else {
                    html += '<div class="grid">';
                    for (var i = 0; i < app.cats.length; i++) {
                        var c = app.cats[i];
                        html += '<div class="card" onclick="app.selected=' + JSON.stringify(c).replace(/"/g, '&quot;') + ';app.page=\'detail\';render()">';
                        if (c.photos && c.photos.length > 0) {
                            html += '<img src="' + c.photos[0] + '" class="card-img" alt="' + c.name + '">';
                        } else {
                            html += '<div class="card-placeholder">üê±</div>';
                        }
                        html += '<div class="card-body"><div class="card-title">' + c.name + '</div><div class="card-text">' + c.breed + '</div><div class="text-sm text-gray">‚è∞ ' + calcAge(c.birthDate) + '</div></div></div>';
                    }
                    html += '</div>';
                }
                html += '</div>';
            }
            
            else if (app.page === 'add') {
                html = '<div class="header"><div class="header-flex"><button class="back-btn" onclick="app.page=\'home\';render()">‚Üê</button><div class="title">' + (app.form.id ? t('edit') : t('add')) + ' ' + t('cat') + '</div></div></div><div class="content"><div class="card"><div class="card-body">';
                
                if (app.form.photos && app.form.photos.length > 0) {
                    html += '<div class="photo-grid">';
                    for (var i = 0; i < app.form.photos.length; i++) {
                        html += '<div class="photo-box"><img src="' + app.form.photos[i] + '" onclick="openModal(\'' + app.form.photos[i] + '\')"><button class="photo-remove" onclick="event.stopPropagation();removePhoto(' + i + ')">√ó</button></div>';
                    }
                    html += '</div>';
                }
                
                if (!app.form.photos || app.form.photos.length < 8) {
                    html += '<input type="file" id="photoInput" accept="image/*" multiple onchange="uploadPhotos(event)"><label for="photoInput" class="file-upload"><div class="upload-icon">üì∏</div><div class="bold">' + t('uploadPhoto') + '</div><div class="text-sm text-gray">' + t('max8') + '</div></label>';
                }
                
                html += '<input type="text" id="catName" class="input" placeholder="' + t('name') + ' *" value="' + (app.form.name || '') + '"><input type="text" id="catBreed" class="input" placeholder="' + t('breed') + ' *" value="' + (app.form.breed || '') + '"><select id="catGender" class="input"><option value="">' + t('gender') + '</option><option value="' + t('male') + '" ' + (app.form.gender === t('male') ? 'selected' : '') + '>' + t('male') + '</option><option value="' + t('female') + '" ' + (app.form.gender === t('female') ? 'selected' : '') + '>' + t('female') + '</option></select><input type="text" id="catColor" class="input" placeholder="' + t('color') + '" value="' + (app.form.color || '') + '"><input type="date" id="catBirth" class="input" value="' + (app.form.birthDate || '') + '">';
                
                if (app.form.birthDate) {
                    html += '<p class="text-gray mb-1">‚è∞ ' + calcAge(app.form.birthDate) + '</p>';
                }
                
                html += '<input type="number" step="0.1" id="catWeight" class="input" placeholder="' + t('weight') + ' (kg)" value="' + (app.form.weight || '') + '"><input type="number" id="catPrice" class="input" placeholder="' + t('price') + '" value="' + (app.form.price || '') + '"><textarea id="catNotes" class="input" rows="4" placeholder="' + t('notes') + '">' + (app.form.notes || '') + '</textarea><div class="flex"><button class="btn btn-primary flex-1" onclick="app.form.name=document.getElementById(\'catName\').value;app.form.breed=document.getElementById(\'catBreed\').value;app.form.gender=document.getElementById(\'catGender\').value;app.form.color=document.getElementById(\'catColor\').value;app.form.birthDate=document.getElementById(\'catBirth\').value;app.form.weight=document.getElementById(\'catWeight\').value;app.form.price=document.getElementById(\'catPrice\').value;app.form.notes=document.getElementById(\'catNotes\').value;saveCat()">üíæ ' + t('save') + '</button><button class="btn btn-secondary flex-1" onclick="app.page=\'home\';render()">‚ùå ' + t('cancel') + '</button></div></div></div></div>';
            }
            
            else if (app.page === 'detail') {
                var vax = app.vaccines.filter(function(v) { return v.catId === app.selected.id; });
                var med = app.medicines.filter(function(m) { return m.catId === app.selected.id; });
                
                html = '<div class="header"><div class="header-flex"><button class="back-btn" onclick="app.page=\'home\';render()">‚Üê</button><div class="title">' + t('detail') + '</div></div></div><div class="content"><div class="card">';
                
                if (app.selected.photos && app.selected.photos.length > 0) {
                    html += '<img src="' + app.selected.photos[0] + '" class="card-img" onclick="openModal(\'' + app.selected.photos[0] + '\')">';
                    if (app.selected.photos.length > 1) {
                        html += '<div class="p-1"><div class="photo-grid">';
                        for (var i = 1; i < app.selected.photos.length; i++) {
                            html += '<div class="photo-box"><img src="' + app.selected.photos[i] + '" onclick="openModal(\'' + app.selected.photos[i] + '\')"></div>';
                        }
                        html += '</div></div>';
                    }
                } else {
                    html += '<div class="card-placeholder">üê±</div>';
                }
                
                html += '<div class="card-body"><h2 class="card-title">' + app.selected.name + '</h2><p class="mb-1"><span class="bold">üêæ ' + t('breed') + ':</span> ' + app.selected.breed + '</p>';
                if (app.selected.gender) html += '<p class="mb-1"><span class="bold">‚ößÔ∏è ' + t('gender') + ':</span> ' + app.selected.gender + '</p>';
                if (app.selected.color) html += '<p class="mb-1"><span class="bold">üé® ' + t('color') + ':</span> ' + app.selected.color + '</p>';
                html += '<p class="mb-1"><span class="bold">‚è∞ ' + (app.lang === 'id' ? 'Umur' : 'Age') + ':</span> ' + calcAge(app.selected.birthDate) + '</p>';
                if (app.selected.weight) html += '<p class="mb-1"><span class="bold">‚öñÔ∏è ' + t('weight') + ':</span> ' + app.selected.weight + ' kg</p>';
                if (app.selected.notes) html += '<p class="mt-1 text-gray">' + app.selected.notes + '</p>';
                
                html += '<div class="flex mt-1"><button class="btn btn-info flex-1" onclick="app.form=' + JSON.stringify(app.selected).replace(/"/g, '&quot;') + ';app.page=\'add\';render()">‚úèÔ∏è ' + t('edit') + '</button><button class="btn btn-danger flex-1" onclick="delCat(' + app.selected.id + ')">üóëÔ∏è ' + t('delete') + '</button></div></div></div>';
                
                html += '<div class="card"><div class="card-body"><div class="section-header"><h3 class="section-title">üíâ ' + t('vaccines') + '</h3><button class="btn btn-success" style="width:auto;padding:10px 20px" onclick="app.form={};app.page=\'addVaccine\';render()">+ ' + t('add') + '</button></div>';
                if (vax.length === 0) {
                    html += '<p class="text-gray">' + t('noData') + '</p>';
                } else {
                    for (var i = 0; i < vax.length; i++) {
                        html += '<div class="item-card"><button class="del-btn" onclick="delVaccine(' + vax[i].id + ')">üóëÔ∏è</button><h4 class="bold">' + vax[i].name + '</h4><p class="text-gray text-sm">üìÖ ' + fmtDate(vax[i].date) + '</p>';
                        if (vax[i].notes) html += '<p class="text-gray text-sm mt-1">' + vax[i].notes + '</p>';
                        html += '</div>';
                    }
                }
                html += '</div></div>';
                
                html += '<div class="card"><div class="card-body"><div class="section-header"><h3 class="section-title">üíä ' + t('medicines') + '</h3><button class="btn btn-success" style="width:auto;padding:10px 20px" onclick="app.form={};app.page=\'addMedicine\';render()">+ ' + t('add') + '</button></div>';
                if (med.length === 0) {
                    html += '<p class="text-gray">' + t('noData') + '</p>';
                } else {
                    for (var i = 0; i < med.length; i++) {
                        html += '<div class="item-card"><button class="del-btn" onclick="delMedicine(' + med[i].id + ')">üóëÔ∏è</button><h4 class="bold">' + med[i].name + '</h4><p class="text-gray text-sm">üíä ' + med[i].type + '</p>';
                        if (med[i].notes) html += '<p class="text-gray text-sm mt-1">' + med[i].notes + '</p>';
                        html += '</div>';
                    }
                }
                html += '</div></div></div>';
            }
            
            else if (app.page === 'addVaccine') {
                html = '<div class="header" style="background:linear-gradient(135deg,#10b981,#14b8a6)"><div class="header-flex"><button class="back-btn" onclick="app.page=\'detail\';render()">‚Üê</button><div class="title">' + t('add') + ' ' + t('vaccines') + '</div></div></div><div class="content"><div class="card"><div class="card-body"><input type="text" id="vName" class="input" placeholder="' + (app.lang === 'id' ? 'Nama Vaksin' : 'Vaccine Name') + ' *"><input type="date" id="vDate" class="input"><textarea id="vNotes" class="input" rows="4" placeholder="' + t('notes') + '"></textarea><div class="flex"><button class="btn btn-success flex-1" onclick="app.form.name=document.getElementById(\'vName\').value;app.form.date=document.getElementById(\'vDate\').value;app.form.notes=document.getElementById(\'vNotes\').value;saveVaccine()">üíæ ' + t('save') + '</button><button class="btn btn-secondary flex-1" onclick="app.page=\'detail\';render()">‚ùå ' + t('cancel') + '</button></div></div></div></div>';
            }
            
            else if (app.page === 'addMedicine') {
                html = '<div class="header" style="background:linear-gradient(135deg,#8b5cf6,#a855f7)"><div class="header-flex"><button class="back-btn" onclick="app.page=\'detail\';render()">‚Üê</button><div class="title">' + t('add') + ' ' + t('medicines') + '</div></div></div><div class="content"><div class="card"><div class="card-body"><input type="text" id="mName" class="input" placeholder="' + (app.lang === 'id' ? 'Nama Obat' : 'Medicine Name') + ' *"><select id="mType" class="input"><option value="">' + (app.lang === 'id' ? 'Tipe' : 'Type') + '</option><option value="Medicine">' + (app.lang === 'id' ? 'Obat' : 'Medicine') + '</option><option value="Vitamin">Vitamin</option><option value="Supplement">' + (app.lang === 'id' ? 'Suplemen' : 'Supplement') + '</option></select><textarea id="mNotes" class="input" rows="4" placeholder="' + t('notes') + '"></textarea><div class="flex"><button class="btn btn-primary flex-1" onclick="app.form.name=document.getElementById(\'mName\').value;app.form.type=document.getElementById(\'mType\').value;app.form.notes=document.getElementById(\'mNotes\').value;saveMedicine()">üíæ ' + t('save') + '</button><button class="btn btn-secondary flex-1" onclick="app.page=\'detail\';render()">‚ùå ' + t('cancel') + '</button></div></div></div></div>';
            }
            
            else if (app.page === 'settings') {
                html = '<div class="header" style="background:linear-gradient(135deg,#6b7280,#3b82f6)"><div class="header-flex"><button class="back-btn" onclick="app.page=\'home\';render()">‚Üê</button><div class="title">‚öôÔ∏è ' + t('settings') + '</div></div></div><div class="content"><div class="card"><div class="card-body"><h3 class="section-title mb-1">üåê ' + t('language') + '</h3><div class="lang-btns"><button class="lang-btn ' + (app.lang === 'id' ? 'active' : '') + '" onclick="changeLang(\'id\')">üáÆüá© Indonesia</button><button class="lang-btn ' + (app.lang === 'en' ? 'active' : '') + '" onclick="changeLang(\'en\')">üá¨üáß English</button></div></div></div><div class="card"><div class="card-body"><h3 class="section-title mb-1">üé® ' + t('theme') + '</h3><div class="theme-grid"><div class="theme-box theme-1 ' + (app.theme === 1 ? 'active' : '') + '" onclick="changeTheme(1)"></div><div class="theme-box theme-2 ' + (app.theme === 2 ? 'active' : '') + '" onclick="changeTheme(2)"></div><div class="theme-box theme-3 ' + (app.theme === 3 ? 'active' : '') + '" onclick="changeTheme(3)"></div><div class="theme-box theme-4 ' + (app.theme === 4 ? 'active' : '') + '" onclick="changeTheme(4)"></div><div class="theme-box theme-5 ' + (app.theme === 5 ? 'active' : '') + '" onclick="changeTheme(5)"></div></div></div></div><div class="card"><div class="card-body"><h3 class="section-title mb-1">üìä Stats</h3><p class="mb-1">üê± ' + (app.lang === 'id' ? 'Total Kucing' : 'Total Cats') + ': <span class="bold">' + app.cats.length + '</span></p><p class="mb-1">üíâ ' + (app.lang === 'id' ? 'Total Vaksin' : 'Total Vaccines') + ': <span class="bold">' + app.vaccines.length + '</span></p><p class="mb-1">üíä ' + (app.lang === 'id' ? 'Total Obat' : 'Total Medicines') + ': <span class="bold">' + app.medicines.length + '</span></p></div></div><div class="card"><div class="card-body"><h3 class="section-title mb-1">‚ÑπÔ∏è About</h3><p class="text-gray text-sm">üì± Cat Story Lovers</p><p class="text-gray text-sm">üî¢ Version 3.0</p><p class="text-gray text-sm">üë®‚Äçüíª Made with ‚ù§Ô∏è</p></div></div></div>';
            }
            
            el.innerHTML = html;
        }
        
        // Initialize
        console.log('Starting app...');
        
        try {
            loadData();
            console.log('Data loaded');
            
            setTimeout(function() {
                render();
                console.log('App rendered successfully!');
            }, 100);
        } catch (e) {
            console.log('Init error:', e);
            document.getElementById('app').innerHTML = '<div class="header"><div class="title">Error: ' + e.message + '</div></div><div class="content"><p>Please refresh the page</p></div>';
        }
    </script>
</body>
</html>