<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cat Story Lovers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #fce7f3 0%, #f3e8ff 50%, #dbeafe 100%);
            min-height: 100vh;
            transition: background-color 0.3s;
        }
        
        body.dark-mode {
            background: #1a1a1a;
            color: #e5e5e5;
        }
        
        .dark-mode .card {
            background-color: #2a2a2a !important;
            color: #e5e5e5 !important;
        }
        
        .dark-mode .input {
            background-color: #333 !important;
            color: #e5e5e5 !important;
            border-color: #505050 !important;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .header {
            background: linear-gradient(135deg, #ec4899, #a855f7);
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header.theme-blue { background: linear-gradient(135deg, #3b82f6, #06b6d4); }
        .header.theme-green { background: linear-gradient(135deg, #10b981, #14b8a6); }
        .header.theme-orange { background: linear-gradient(135deg, #f97316, #f59e0b); }
        .header.theme-purple { background: linear-gradient(135deg, #8b5cf6, #a855f7); }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .title {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }
        
        .subtitle {
            font-size: 0.875rem;
            color: rgba(255,255,255,0.9);
            margin-top: 0.25rem;
        }
        
        .btn-group {
            display: flex;
            gap: 0.75rem;
        }
        
        .btn-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .btn-icon:active {
            transform: scale(0.95);
        }
        
        .btn-icon.primary {
            background: white;
            color: #ec4899;
            width: 3.5rem;
            height: 3.5rem;
            font-size: 2rem;
        }
        
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }
        
        .card-image {
            width: 100%;
            height: 14rem;
            object-fit: cover;
        }
        
        .card-placeholder {
            width: 100%;
            height: 14rem;
            background: linear-gradient(135deg, #fbb6ce, #c084fc);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
        }
        
        .card-body {
            padding: 1.25rem;
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .card-text {
            color: #6b7280;
            margin-bottom: 0.5rem;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            padding: 1.5rem 0;
        }
        
        .empty-state {
            text-align: center;
            padding: 5rem 0;
        }
        
        .empty-icon {
            font-size: 6rem;
            margin-bottom: 1.5rem;
        }
        
        .input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #d1d5db;
            border-radius: 0.75rem;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        
        .btn {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ec4899, #a855f7);
            color: white;
        }
        
        .btn-secondary {
            background: #9ca3af;
            color: white;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-info {
            background: #3b82f6;
            color: white;
        }
        
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .photo-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-remove {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            font-size: 1rem;
            cursor: pointer;
        }
        
        .file-label {
            display: block;
            padding: 2rem;
            border: 2px dashed #d1d5db;
            border-radius: 0.75rem;
            text-align: center;
            cursor: pointer;
            margin: 1rem 0;
        }
        
        .file-label:active {
            background: #f3f4f6;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 0.5rem;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
            margin-right: 1rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .item-box {
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
        }
        
        .delete-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: none;
            border: none;
            color: #ef4444;
            font-size: 1.25rem;
            cursor: pointer;
        }
        
        .theme-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.75rem;
            margin: 1rem 0;
        }
        
        .theme-box {
            aspect-ratio: 1;
            border-radius: 0.75rem;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .theme-box.active {
            border-color: #ec4899;
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.3);
        }
        
        .theme-pink { background: linear-gradient(135deg, #ec4899, #a855f7); }
        .theme-blue { background: linear-gradient(135deg, #3b82f6, #06b6d4); }
        .theme-green { background: linear-gradient(135deg, #10b981, #14b8a6); }
        .theme-orange { background: linear-gradient(135deg, #f97316, #f59e0b); }
        .theme-purple { background: linear-gradient(135deg, #8b5cf6, #a855f7); }
        
        .lang-selector {
            display: flex;
            gap: 0.75rem;
        }
        
        .lang-btn {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            background: white;
            cursor: pointer;
            font-weight: bold;
        }
        
        .lang-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
            margin: 1rem 0;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            border: 1px solid #e5e7eb;
        }
        
        .calendar-day.has-event {
            background: linear-gradient(135deg, #ec4899, #a855f7);
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.today {
            border: 2px solid #ec4899;
        }
        
        .chart-container {
            width: 100%;
            height: 250px;
            margin: 1rem 0;
            position: relative;
        }
        
        .fade-in {
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .content {
            padding: 1.5rem 1rem;
        }
        
        .flex-row {
            display: flex;
            gap: 0.75rem;
        }
        
        .flex-1 {
            flex: 1;
        }
        
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mt-2 { margin-top: 1rem; }
        .p-2 { padding: 1rem; }
        
        .text-sm { font-size: 0.875rem; }
        .text-gray { color: #6b7280; }
        .font-bold { font-weight: bold; }
    </style>
</head>
<body>
    <div id="app"></div>
    
    <div id="imageModal" class="modal" onclick="closeModal()">
        <img id="modalImage" src="" alt="Full size">
    </div>

    <script>
        // Initialize
        console.log('App starting...');
        
        const translations = {
            id: {
                myTitle: 'Cat Story Lovers',
                total: 'Total',
                noCats: 'Belum ada kucing',
                clickAdd: 'Klik tombol + untuk menambahkan',
                add: 'Tambah',
                edit: 'Edit',
                cat: 'Kucing',
                detail: 'Detail',
                photos: 'Foto',
                selectPhotos: 'Pilih Foto dari Galeri',
                name: 'Nama',
                breed: 'Jenis',
                gender: 'Kelamin',
                choose: 'Pilih',
                male: 'Jantan',
                female: 'Betina',
                color: 'Warna',
                birthDate: 'Tanggal Lahir',
                weight: 'Berat',
                price: 'Harga',
                notes: 'Catatan',
                save: 'Simpan',
                cancel: 'Batal',
                delete: 'Hapus',
                vaccines: 'Vaksin',
                medicines: 'Obat',
                noData: 'Belum ada data',
                settings: 'Pengaturan',
                language: 'Bahasa',
                darkMode: 'Mode Gelap',
                theme: 'Tema',
                backup: 'Backup Data',
                kg: 'kg'
            },
            en: {
                myTitle: 'Cat Story Lovers',
                total: 'Total',
                noCats: 'No cats yet',
                clickAdd: 'Click + to add',
                add: 'Add',
                edit: 'Edit',
                cat: 'Cat',
                detail: 'Detail',
                photos: 'Photos',
                selectPhotos: 'Select Photos',
                name: 'Name',
                breed: 'Breed',
                gender: 'Gender',
                choose: 'Choose',
                male: 'Male',
                female: 'Female',
                color: 'Color',
                birthDate: 'Birth Date',
                weight: 'Weight',
                price: 'Price',
                notes: 'Notes',
                save: 'Save',
                cancel: 'Cancel',
                delete: 'Delete',
                vaccines: 'Vaccines',
                medicines: 'Medicines',
                noData: 'No data',
                settings: 'Settings',
                language: 'Language',
                darkMode: 'Dark Mode',
                theme: 'Theme',
                backup: 'Backup',
                kg: 'kg'
            }
        };

        let lang = 'id';
        let page = 'home';
        let cats = [];
        let vaccines = [];
        let medicines = [];
        let selectedCat = null;
        let formData = {};
        let darkMode = false;
        let currentTheme = 'pink';

        function t(key) {
            return translations[lang][key] || key;
        }

        function loadData() {
            try {
                const savedCats = localStorage.getItem('cats');
                const savedVaccines = localStorage.getItem('vaccines');
                const savedMedicines = localStorage.getItem('medicines');
                const savedLang = localStorage.getItem('language');
                const savedDarkMode = localStorage.getItem('darkMode');
                const savedTheme = localStorage.getItem('theme');
                
                if (savedCats) cats = JSON.parse(savedCats);
                if (savedVaccines) vaccines = JSON.parse(savedVaccines);
                if (savedMedicines) medicines = JSON.parse(savedMedicines);
                if (savedLang) lang = savedLang;
                if (savedDarkMode) darkMode = savedDarkMode === 'true';
                if (savedTheme) currentTheme = savedTheme;
                
                applyDarkMode();
            } catch (e) {
                console.error('Error loading data:', e);
            }
        }

        function saveData() {
            try {
                localStorage.setItem('cats', JSON.stringify(cats));
                localStorage.setItem('vaccines', JSON.stringify(vaccines));
                localStorage.setItem('medicines', JSON.stringify(medicines));
                localStorage.setItem('language', lang);
                localStorage.setItem('darkMode', darkMode);
                localStorage.setItem('theme', currentTheme);
            } catch (e) {
                console.error('Error saving data:', e);
            }
        }

        function applyDarkMode() {
            if (darkMode) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
        }

        function toggleDarkMode() {
            darkMode = !darkMode;
            applyDarkMode();
            saveData();
            render();
        }

        function changeTheme(theme) {
            currentTheme = theme;
            saveData();
            render();
        }

        function changeLang(newLang) {
            lang = newLang;
            saveData();
            render();
        }

        function calculateAge(birthDate) {
            if (!birthDate) return t('noData');
            const today = new Date();
            const birth = new Date(birthDate);
            const years = Math.floor((today - birth) / (365.25 * 24 * 60 * 60 * 1000));
            const months = Math.floor(((today - birth) % (365.25 * 24 * 60 * 60 * 1000)) / (30.44 * 24 * 60 * 60 * 1000));
            return `${years} ${lang === 'id' ? 'tahun' : 'years'} ${months} ${lang === 'id' ? 'bulan' : 'months'}`;
        }

        function formatDate(dateString) {
            if (!dateString) return t('noData');
            const date = new Date(dateString);
            const monthsId = ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agt', 'Sep', 'Okt', 'Nov', 'Des'];
            const monthsEn = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const months = lang === 'id' ? monthsId : monthsEn;
            return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
        }

        function handleMultipleImageUpload(event) {
            const files = event.target.files;
            if (!formData.photos) formData.photos = [];
            
            Array.from(files).forEach(file => {
                if (formData.photos.length >= 8) {
                    alert(lang === 'id' ? 'Maksimal 8 foto!' : 'Maximum 8 photos!');
                    return;
                }
                
                if (file.size > 5000000) {
                    alert(lang === 'id' ? 'File terlalu besar! Max 5MB' : 'File too large! Max 5MB');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    formData.photos.push(e.target.result);
                    render();
                };
                reader.readAsDataURL(file);
            });
        }

        function removePhoto(index) {
            formData.photos.splice(index, 1);
            render();
        }

        function openModal(photoUrl) {
            document.getElementById('modalImage').src = photoUrl;
            document.getElementById('imageModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('imageModal').classList.remove('active');
        }

        function saveCat() {
            if (!formData.name || !formData.breed) {
                alert(lang === 'id' ? 'Nama dan jenis wajib diisi!' : 'Name and breed required!');
                return;
            }
            if (!formData.photos) formData.photos = [];
            if (formData.id) {
                cats = cats.map(c => c.id === formData.id ? formData : c);
            } else {
                cats.push({ ...formData, id: Date.now() });
            }
            saveData();
            formData = {};
            page = 'home';
            render();
        }

        function deleteCat(id) {
            if (confirm(lang === 'id' ? 'Hapus kucing ini?' : 'Delete this cat?')) {
                cats = cats.filter(c => c.id !== id);
                vaccines = vaccines.filter(v => v.catId !== id);
                medicines = medicines.filter(m => m.catId !== id);
                saveData();
                page = 'home';
                render();
            }
        }

        function saveVaccine() {
            if (!formData.name || !formData.date) {
                alert(lang === 'id' ? 'Nama dan tanggal wajib diisi!' : 'Name and date required!');
                return;
            }
            vaccines.push({ ...formData, id: Date.now(), catId: selectedCat.id });
            saveData();
            formData = {};
            page = 'detail';
            render();
        }

        function deleteVaccine(id) {
            if (confirm(lang === 'id' ? 'Hapus vaksin?' : 'Delete vaccine?')) {
                vaccines = vaccines.filter(v => v.id !== id);
                saveData();
                render();
            }
        }

        function saveMedicine() {
            if (!formData.name || !formData.type) {
                alert(lang === 'id' ? 'Nama dan tipe wajib diisi!' : 'Name and type required!');
                return;
            }
            medicines.push({ ...formData, id: Date.now(), catId: selectedCat.id });
            saveData();
            formData = {};
            page = 'detail';
            render();
        }

        function deleteMedicine(id) {
            if (confirm(lang === 'id' ? 'Hapus obat?' : 'Delete medicine?')) {
                medicines = medicines.filter(m => m.id !== id);
                saveData();
                render();
            }
        }

        function exportData() {
            const data = { cats, vaccines, medicines, exportDate: new Date().toISOString() };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'cat-story-lovers-backup.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function render() {
            const app = document.getElementById('app');
            
            if (page === 'home') {
                app.innerHTML = `
                    <div class="fade-in">
                        <div class="header theme-${currentTheme}">
                            <div class="header-content container">
                                <div>
                                    <div class="title">üê± ${t('myTitle')}</div>
                                    <div class="subtitle">${t('total')}: ${cats.length}</div>
                                </div>
                                <div class="btn-group">
                                    <button class="btn-icon" onclick="toggleDarkMode()">${darkMode ? '‚òÄÔ∏è' : 'üåô'}</button>
                                    <button class="btn-icon" onclick="page='settings'; render()">‚öôÔ∏è</button>
                                    <button class="btn-icon primary" onclick="formData={}; formData.photos=[]; page='add'; render()">+</button>
                                </div>
                            </div>
                        </div>
                        <div class="content container">
                            ${cats.length === 0 ? `
                                <div class="empty-state">
                                    <div class="empty-icon">üòø</div>
                                    <h2>${t('noCats')}</h2>
                                    <p class="text-gray">${t('clickAdd')}</p>
                                </div>
                            ` : `
                                <div class="grid">
                                    ${cats.map(cat => `
                                        <div class="card" onclick="selectedCat=${JSON.stringify(cat).replace(/"/g, '&quot;')}; page='detail'; render();">
                                            ${cat.photos && cat.photos.length > 0 ? 
                                                `<img src="${cat.photos[0]}" class="card-image" alt="${cat.name}">` :
                                                `<div class="card-placeholder">üê±</div>`
                                            }
                                            <div class="card-body">
                                                <h3 class="card-title">${cat.name}</h3>
                                                <p class="card-text">${cat.breed}</p>
                                                <p class="text-sm text-gray">‚è∞ ${calculateAge(cat.birthDate)}</p>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }
            
            else if (page === 'add') {
                app.innerHTML = `
                    <div class="fade-in">
                        <div class="header theme-${currentTheme}">
                            <div class="header-content container">
                                <button class="back-btn" onclick="page='home'; render()">‚Üê</button>
                                <div class="title">${formData.id ? t('edit') : t('add')} ${t('cat')}</div>
                            </div>
                        </div>
                        <div class="content container">
                            <div class="card">
                                <div class="card-body">
                                    ${formData.photos && formData.photos.length > 0 ? `
                                        <div class="photo-gallery">
                                            ${formData.photos.map((photo, index) => `
                                                <div class="photo-item">
                                                    <img src="${photo}" alt="Photo ${index + 1}" onclick="openModal('${photo}')">
                                                    <button class="photo-remove" onclick="event.stopPropagation(); removePhoto(${index})">√ó</button>
                                                </div>
                                            `).join('')}
                                        </div>
                                    ` : ''}
                                    
                                    ${!formData.photos || formData.photos.length < 8 ? `
                                        <input type="file" id="photoFiles" accept="image/*" multiple onchange="handleMultipleImageUpload(event)" style="display:none">
                                        <label for="photoFiles" class="file-label">
                                            <div style="font-size: 3rem">üì∏</div>
                                            <div class="font-bold">${t('selectPhotos')}</div>
                                            <div class="text-sm text-gray">Max 8 photos, 5MB each</div>
                                        </label>
                                    ` : ''}
                                    
                                    <input type="text" id="name" class="input" placeholder="${t('name')} *" value="${formData.name || ''}">
                                    <input type="text" id="breed" class="input" placeholder="${t('breed')} *" value="${formData.breed || ''}">
                                    
                                    <select id="gender" class="input">
                                        <option value="">${t('gender')}</option>
                                        <option value="${t('male')}" ${formData.gender === t('male') ? 'selected' : ''}>${t('male')}</option>
                                        <option value="${t('female')}" ${formData.gender === t('female') ? 'selected' : ''}>${t('female')}</option>
                                    </select>
                                    
                                    <input type="text" id="color" class="input" placeholder="${t('color')}" value="${formData.color || ''}">
                                    <input type="date" id="birthDate" class="input" value="${formData.birthDate || ''}">
                                    ${formData.birthDate ? `<p class="text-gray mb-2">‚è∞ ${calculateAge(formData.birthDate)}</p>` : ''}
                                    
                                    <input type="number" step="0.1" id="weight" class="input" placeholder="${t('weight')} (${t('kg')})" value="${formData.weight || ''}">
                                    <input type="number" id="price" class="input" placeholder="${t('price')}" value="${formData.price || ''}">
                                    <textarea id="notes" class="input" rows="4" placeholder="${t('notes')}">${formData.notes || ''}</textarea>
                                    
                                    <div class="flex-row">
                                        <button class="btn btn-primary flex-1" onclick="
                                            formData.name = document.getElementById('name').value;
                                            formData.breed = document.getElementById('breed').value;
                                            formData.gender = document.getElementById('gender').value;
                                            formData.color = document.getElementById('color').value;
                                            formData.birthDate = document.getElementById('birthDate').value;
                                            formData.weight = document.getElementById('weight').value;
                                            formData.price = document.getElementById('price').value;
                                            formData.notes = document.getElementById('notes').value;
                                            saveCat();
                                        ">üíæ ${t('save')}</button>
                                        <button class="btn btn-secondary flex-1" onclick="page='home'; render()">‚ùå ${t('cancel')}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            else if (page === 'detail') {
                const catVaccines = vaccines.filter(v => v.catId === selectedCat.id);
                const catMedicines = medicines.filter(m => m.catId === selectedCat.id);
                
                app.innerHTML = `
                    <div class="fade-in">
                        <div class="header theme-${currentTheme}">
                            <div class="header-content container">
                                <button class="back-btn" onclick="page='home'; render()">‚Üê</button>
                                <div class="title">${t('detail')}</div>
                            </div>
                        </div>
                        <div class="content container">
                            <div class="card">
                                ${selectedCat.photos && selectedCat.photos.length > 0 ? `
                                    <img src="${selectedCat.photos[0]}" class="card-image" onclick="openModal('${selectedCat.photos[0]}')" alt="${selectedCat.name}">
                                    ${selectedCat.photos.length > 1 ? `
                                        <div class="photo-gallery p-2">
                                            ${selectedCat.photos.slice(1).map(photo => `
                                                <div class="photo-item">
                                                    <img src="${photo}" onclick="openModal('${photo}')" alt="Photo">
                                                </div>
                                            `).join('')}
                                        </div>
                                    ` : ''}
                                ` : `
                                    <div class="card-placeholder">üê±</div>
                                `}
                                
                                <div class="card-body">
                                    <h2 class="card-title" style="font-size: 2rem">${selectedCat.name}</h2>
                                    <p class="mb-1"><span class="font-bold">üêæ ${t('breed')}:</span> ${selectedCat.breed}</p>
                                    ${selectedCat.gender ? `<p class="mb-1"><span class="font-bold">‚ößÔ∏è ${t('gender')}:</span> ${selectedCat.gender}</p>` : ''}
                                    ${selectedCat.color ? `<p class="mb-1"><span class="font-bold">üé® ${t('color')}:</span> ${selectedCat.color}</p>` : ''}
                                    <p class="mb-1"><span class="font-bold">‚è∞ ${lang === 'id' ? 'Umur' : 'Age'}:</span> ${calculateAge(selectedCat.birthDate)}</p>
                                    ${selectedCat.weight ? `<p class="mb-1"><span class="font-bold">‚öñÔ∏è ${t('weight')}:</span> ${selectedCat.weight} kg</p>` : ''}
                                    ${selectedCat.notes ? `<p class="mt-2 text-gray">${selectedCat.notes}</p>` : ''}
                                    
                                    <div class="flex-row mt-2">
                                        <button class="btn btn-info flex-1" onclick="formData=${JSON.stringify(selectedCat).replace(/"/g, '&quot;')}; page='add'; render()">‚úèÔ∏è ${t('edit')}</button>
                                        <button class="btn btn-danger flex-1" onclick="deleteCat(${selectedCat.id})">üóëÔ∏è ${t('delete')}</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <div class="section-header">
                                        <h3 class="section-title">üíâ ${t('vaccines')}</h3>
                                        <button class="btn btn-success" style="width:auto;padding:0.5rem 1rem" onclick="formData={}; page='addVaccine'; render()">+ ${t('add')}</button>
                                    </div>
                                    ${catVaccines.length === 0 ? 
                                        `<p class="text-gray">${t('noData')}</p>` :
                                        `${catVaccines.map(v => `
                                            <div class="item-box">
                                                <button class="delete-btn" onclick="deleteVaccine(${v.id})">üóëÔ∏è</button>
                                                <h4 class="font-bold">${v.name}</h4>
                                                <p class="text-gray text-sm">üìÖ ${formatDate(v.date)}</p>
                                                ${v.notes ? `<p class="text-gray text-sm mt-1">${v.notes}</p>` : ''}
                                            </div>
                                        `).join('')}`
                                    }
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <div class="section-header">
                                        <h3 class="section-title">üíä ${t('medicines')}</h3>
                                        <button class="btn btn-success" style="width:auto;padding:0.5rem 1rem" onclick="formData={}; page='addMedicine'; render()">+ ${t('add')}</button>
                                    </div>
                                    ${catMedicines.length === 0 ? 
                                        `<p class="text-gray">${t('noData')}</p>` :
                                        `${catMedicines.map(m => `
                                            <div class="item-box">
                                                <button class="delete-btn" onclick="deleteMedicine(${m.id})">üóëÔ∏è</button>
                                                <h4 class="font-bold">${m.name}</h4>
                                                <p class="text-gray text-sm">üíä ${m.type}</p>
                                                ${m.notes ? `<p class="text-gray text-sm mt-1">${m.notes}</p>` : ''}
                                            </div>
                                        `).join('')}`
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            else if (page === 'addVaccine') {
                app.innerHTML = `
                    <div class="fade-in">
                        <div class="header" style="background: linear-gradient(135deg, #10b981, #14b8a6)">
                            <div class="header-content container">
                                <button class="back-btn" onclick="page='detail'; render()">‚Üê</button>
                                <div class="title">${t('add')} ${t('vaccines')}</div>
                            </div>
                        </div>
                        <div class="content container">
                            <div class="card">
                                <div class="card-body">
                                    <input type="text" id="vName" class="input" placeholder="${lang === 'id' ? 'Nama Vaksin' : 'Vaccine Name'} *">
                                    <input type="date" id="vDate" class="input">
                                    <textarea id="vNotes" class="input" rows="4" placeholder="${t('notes')}"></textarea>
                                    
                                    <div class="flex-row">
                                        <button class="btn btn-success flex-1" onclick="
                                            formData.name = document.getElementById('vName').value;
                                            formData.date = document.getElementById('vDate').value;
                                            formData.notes = document.getElementById('vNotes').value;
                                            saveVaccine();
                                        ">üíæ ${t('save')}</button>
                                        <button class="btn btn-secondary flex-1" onclick="page='detail'; render()">‚ùå ${t('cancel')}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            else if (page === 'addMedicine') {
                app.innerHTML = `
                    <div class="fade-in">
                        <div class="header" style="background: linear-gradient(135deg, #8b5cf6, #a855f7)">
                            <div class="header-content container">
                                <button class="back-btn" onclick="page='detail'; render()">‚Üê</button>
                                <div class="title">${t('add')} ${t('medicines')}</div>
                            </div>
                        </div>
                        <div class="content container">
                            <div class="card">
                                <div class="card-body">
                                    <input type="text" id="mName" class="input" placeholder="${lang === 'id' ? 'Nama Obat' : 'Medicine Name'} *">
                                    <select id="mType" class="input">
                                        <option value="">${lang === 'id' ? 'Tipe' : 'Type'}</option>
                                        <option value="Medicine">${lang === 'id' ? 'Obat' : 'Medicine'}</option>
                                        <option value="Vitamin">Vitamin</option>
                                        <option value="Supplement">${lang === 'id' ? 'Suplemen' : 'Supplement'}</option>
                                    </select>
                                    <textarea id="mNotes" class="input" rows="4" placeholder="${t('notes')}"></textarea>
                                    
                                    <div class="flex-row">
                                        <button class="btn btn-primary flex-1" onclick="
                                            formData.name = document.getElementById('mName').value;
                                            formData.type = document.getElementById('mType').value;
                                            formData.notes = document.getElementById('mNotes').value;
                                            saveMedicine();
                                        ">üíæ ${t('save')}</button>
                                        <button class="btn btn-secondary flex-1" onclick="page='detail'; render()">‚ùå ${t('cancel')}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            else if (page === 'settings') {
                app.innerHTML = `
                    <div class="fade-in">
                        <div class="header" style="background: linear-gradient(135deg, #6b7280, #3b82f6)">
                            <div class="header-content container">
                                <button class="back-btn" onclick="page='home'; render()">‚Üê</button>
                                <div class="title">‚öôÔ∏è ${t('settings')}</div>
                            </div>
                        </div>
                        <div class="content container">
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="section-title mb-2">üåê ${t('language')}</h3>
                                    <div class="lang-selector">
                                        <button class="lang-btn ${lang === 'id' ? 'active' : ''}" onclick="changeLang('id')">üáÆüá© Indonesia</button>
                                        <button class="lang-btn ${lang === 'en' ? 'active' : ''}" onclick="changeLang('en')">üá¨üáß English</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="section-title mb-2">üåô ${t('darkMode')}</h3>
                                    <button class="btn ${darkMode ? 'btn-primary' : 'btn-secondary'}" onclick="toggleDarkMode()">
                                        ${darkMode ? '‚òÄÔ∏è ' + (lang === 'id' ? 'Mode Terang' : 'Light') : 'üåô ' + (lang === 'id' ? 'Mode Gelap' : 'Dark')}
                                    </button>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="section-title mb-2">üé® ${t('theme')}</h3>
                                    <div class="theme-selector">
                                        <div class="theme-box theme-pink ${currentTheme === 'pink' ? 'active' : ''}" onclick="changeTheme('pink')"></div>
                                        <div class="theme-box theme-blue ${currentTheme === 'blue' ? 'active' : ''}" onclick="changeTheme('blue')"></div>
                                        <div class="theme-box theme-green ${currentTheme === 'green' ? 'active' : ''}" onclick="changeTheme('green')"></div>
                                        <div class="theme-box theme-orange ${currentTheme === 'orange' ? 'active' : ''}" onclick="changeTheme('orange')"></div>
                                        <div class="theme-box theme-purple ${currentTheme === 'purple' ? 'active' : ''}" onclick="changeTheme('purple')"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="section-title mb-2">üíæ ${t('backup')}</h3>
                                    <button class="btn btn-success" onclick="exportData()">üì• Download Backup</button>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="section-title mb-2">üìä Stats</h3>
                                    <p class="mb-1">üê± ${lang === 'id' ? 'Total Kucing' : 'Total Cats'}: <span class="font-bold">${cats.length}</span></p>
                                    <p class="mb-1">üíâ ${lang === 'id' ? 'Total Vaksin' : 'Total Vaccines'}: <span class="font-bold">${vaccines.length}</span></p>
                                    <p class="mb-1">üíä ${lang === 'id' ? 'Total Obat' : 'Total Medicines'}: <span class="font-bold">${medicines.length}</span></p>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <h3 class="section-title mb-2">‚ÑπÔ∏è About</h3>
                                    <p class="text-gray text-sm">üì± Cat Story Lovers Ultimate</p>
                                    <p class="text-gray text-sm">üî¢ Version 3.0</p>
                                    <p class="text-gray text-sm">üë®‚Äçüíª Made with ‚ù§Ô∏è</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Initialize app
        loadData();
        render();
        console.log('App loaded successfully!');
    </script>
</body>
</html>